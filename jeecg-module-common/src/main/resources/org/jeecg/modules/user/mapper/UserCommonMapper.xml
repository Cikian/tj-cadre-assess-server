<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jeecg.modules.user.mapper.UserCommonMapper">


    <select id="getUserByRoleCode" resultType="org.jeecg.modules.system.entity.SysUser">
        select sys_user.*
        from sys_user
                 inner join sys_user_role on sys_user.id = sys_user_role.user_id
                 inner join sys_role on sys_user_role.role_id = sys_role.id
        where sys_user.del_flag = 0
          and sys_user.status = 1
          and sys_role.role_code = #{roleCode}
    </select>
    <select id="getTotalPeopleNum" resultType="java.lang.Integer">
        select count(1)
        from sys_user
        where del_flag = 0
    </select>
    <select id="getAllLeaders" resultType="org.jeecg.modules.system.entity.SysUser">
        select sys_user.*
        from sys_user
                 inner join assess_leader_depart_config on sys_user.id = assess_leader_depart_config.leader_id
    </select>
    <select id="getHistoryAssessUnit" resultType="org.jeecg.modules.system.entity.SysUser">
        select sys_user.*
        from sys_user
                 inner join leader_depart_history on sys_user.id = leader_depart_history.leader_id
        where leader_depart_history.assess_year = #{year}
    </select>
</mapper>